var JSON;JSON||(JSON={});
(function(){function m(c,b){var r,f,h,u,z=g,p,k=b[c];k&&"object"==typeof k&&"function"==typeof k.toJSON&&(k=k.toJSON(c));"function"==typeof v&&(k=v.call(b,c,k));switch(typeof k){case "string":return l(k);case "number":return isFinite(k)?String(k):"null";case "boolean":case "null":return String(k);case "object":if(!k)return"null";g+=n;p=[];if("[object Array]"===Object.prototype.toString.apply(k)){u=k.length;for(r=0;r<u;r+=1)p[r]=m(r,k)||"null";h=0===p.length?"[]":g?"[\n"+g+p.join(",\n"+g)+"\n"+z+"]":
"["+p.join(",")+"]";g=z;return h}if(v&&"object"==typeof v)for(u=v.length,r=0;r<u;r+=1)"string"==typeof v[r]&&(f=v[r],h=m(f,k),h&&p.push(l(f)+(g?": ":":")+h));else for(f in k)Object.prototype.hasOwnProperty.call(k,f)&&(h=m(f,k),h&&p.push(l(f)+(g?": ":":")+h));h=0===p.length?"{}":g?"{\n"+g+p.join(",\n"+g)+"\n"+z+"}":"{"+p.join(",")+"}";g=z;return h}}function l(c){b.lastIndex=0;return b.test(c)?'"'+c.replace(b,function(c){var b=f[c];return"string"==typeof b?b:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+c+'"'}function c(c){return 10>c?"0"+c:c}"use strict";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(c){return this.valueOf()});var h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,n,f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},v;"function"!=typeof JSON.stringify&&(JSON.stringify=function(c,b,f){var h;n=g="";if("number"==typeof f)for(h=0;h<f;h+=1)n+=" ";else"string"==typeof f&&(n=f);v=b;if(!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return m("",{"":c});throw Error("JSON.stringify");});"function"!=
typeof JSON.parse&&(JSON.parse=function(c,b){function g(c,f){var n,h,k=c[f];if(k&&"object"==typeof k)for(n in k)Object.prototype.hasOwnProperty.call(k,n)&&(h=g(k,n),void 0!==h?k[n]=h:delete k[n]);return b.call(c,f,k)}var f;c=String(c);h.lastIndex=0;h.test(c)&&(c=c.replace(h,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+c+")"),"function"==typeof b?g({"":f},""):f;throw new SyntaxError("JSON.parse");})})();
SockJS=function(){var m=document,l=window,c={},h=function(){};h.prototype.addEventListener=function(a,d){this._listeners||(this._listeners={});a in this._listeners||(this._listeners[a]=[]);var A=this._listeners[a];-1===c.arrIndexOf(A,d)&&A.push(d)};h.prototype.removeEventListener=function(a,d){if(this._listeners&&a in this._listeners){var A=this._listeners[a],e=c.arrIndexOf(A,d);-1!==e&&(1<A.length?this._listeners[a]=A.slice(0,e).concat(A.slice(e+1)):delete this._listeners[a])}};h.prototype.dispatchEvent=
function(a){var d=a.type,c=Array.prototype.slice.call(arguments,0);this["on"+d]&&this["on"+d].apply(this,c);if(this._listeners&&d in this._listeners)for(var e=0;e<this._listeners[d].length;e++)this._listeners[d][e].apply(this,c)};var b=function(a,d){this.type=a;if("undefined"!==typeof d)for(var c in d)d.hasOwnProperty(c)&&(this[c]=d[c])};b.prototype.toString=function(){var a=[],d;for(d in this)if(this.hasOwnProperty(d)){var c=this[d];"function"===typeof c&&(c="[function]");a.push(d+"="+c)}return"SimpleEvent("+
a.join(", ")+")"};var g=function(a){this._events=a||[];this._listeners={}};g.prototype.emit=function(a){this._verifyType(a);if(!this._nuked){var d=Array.prototype.slice.call(arguments,1);this["on"+a]&&this["on"+a].apply(this,d);if(a in this._listeners)for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].apply(this,d)}};g.prototype.on=function(a,d){this._verifyType(a);this._nuked||(a in this._listeners||(this._listeners[a]=[]),this._listeners[a].push(d))};g.prototype._verifyType=function(a){-1===
c.arrIndexOf(this._events,a)&&c.log("Event "+JSON.stringify(a)+" not listed "+JSON.stringify(this._events)+" in "+this)};g.prototype.nuke=function(){this._nuked=!0;for(var a=0;a<this._events.length;a++)delete this[this._events[a]];this._listeners={}};c.random_string=function(a,d){d=d||37;var c,e=[];for(c=0;c<a;c++)e.push("abcdefghijklmnopqrstuvwxyz0123456789_".substr(Math.floor(Math.random()*d),1));return e.join("")};c.random_number=function(a){return Math.floor(Math.random()*a)};c.random_number_string=
function(a){var d=(""+(a-1)).length;return(Array(d+1).join("0")+c.random_number(a)).slice(-d)};c.getOrigin=function(a){return(a+"/").split("/").slice(0,3).join("/")};c.isSameOriginUrl=function(a,d){d||(d=l.location.href);return a.split("/").slice(0,3).join("/")===d.split("/").slice(0,3).join("/")};c.getParentDomain=function(a){return/^[0-9.]*$/.test(a)||/^\[/.test(a)||!/[.]/.test(a)?a:a.split(".").slice(1).join(".")};c.objectExtend=function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);return a};
c.polluteGlobalNamespace=function(){"_jp"in l||(l._jp={})};c.closeFrame=function(a,d){return"c"+JSON.stringify([a,d])};c.userSetCode=function(a){return 1E3===a||3E3<=a&&4999>=a};c.countRTO=function(a){return 100<a?3*a:a+200};c.log=function(){l.console&&(console.log&&console.log.apply)&&console.log.apply(console,arguments)};c.bind=function(a,d){return a.bind?a.bind(d):function(){return a.apply(d,arguments)}};c.flatUrl=function(a){return-1===a.indexOf("?")&&-1===a.indexOf("#")};c.amendUrl=function(a){var d=
m.location;if(!a)throw Error("Wrong url for SockJS");if(!c.flatUrl(a))throw Error("Only basic urls are supported in SockJS");0===a.indexOf("//")&&(a=d.protocol+a);0===a.indexOf("/")&&(a=d.protocol+"//"+d.host+a);return a=a.replace(/[/]+$/,"")};c.arrIndexOf=function(a,d){for(var c=0;c<a.length;c++)if(a[c]===d)return c;return-1};c.arrSkip=function(a,d){var b=c.arrIndexOf(a,d);return-1===b?a.slice():a.slice(0,b).concat(a.slice(b+1))};c.isArray=Array.isArray||function(a){return 0<={}.toString.call(a).indexOf("Array")};
c.delay=function(a,d){"function"===typeof a&&(d=a,a=0);return setTimeout(d,a)};var n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\x00":"\\u0000","\u0001":"\\u0001","\u0002":"\\u0002","\u0003":"\\u0003","\u0004":"\\u0004","\u0005":"\\u0005","\u0006":"\\u0006","\u0007":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","\u000e":"\\u000e","\u000f":"\\u000f","\u0010":"\\u0010","\u0011":"\\u0011",
"\u0012":"\\u0012","\u0013":"\\u0013","\u0014":"\\u0014","\u0015":"\\u0015","\u0016":"\\u0016","\u0017":"\\u0017","\u0018":"\\u0018","\u0019":"\\u0019","\u001a":"\\u001a","\u001b":"\\u001b","\u001c":"\\u001c","\u001d":"\\u001d","\u001e":"\\u001e","\u001f":"\\u001f",'"':'\\"',"\\":"\\\\","\u007f":"\\u007f","\u0080":"\\u0080","\u0081":"\\u0081","\u0082":"\\u0082","\u0083":"\\u0083","\u0084":"\\u0084","\u0085":"\\u0085","\u0086":"\\u0086","\u0087":"\\u0087","\u0088":"\\u0088","\u0089":"\\u0089","\u008a":"\\u008a",
"\u008b":"\\u008b","\u008c":"\\u008c","\u008d":"\\u008d","\u008e":"\\u008e","\u008f":"\\u008f","\u0090":"\\u0090","\u0091":"\\u0091","\u0092":"\\u0092","\u0093":"\\u0093","\u0094":"\\u0094","\u0095":"\\u0095","\u0096":"\\u0096","\u0097":"\\u0097","\u0098":"\\u0098","\u0099":"\\u0099","\u009a":"\\u009a","\u009b":"\\u009b","\u009c":"\\u009c","\u009d":"\\u009d","\u009e":"\\u009e","\u009f":"\\u009f","\u00ad":"\\u00ad","\u0600":"\\u0600","\u0601":"\\u0601","\u0602":"\\u0602","\u0603":"\\u0603","\u0604":"\\u0604",
"\u070f":"\\u070f","\u17b4":"\\u17b4","\u17b5":"\\u17b5","\u200c":"\\u200c","\u200d":"\\u200d","\u200e":"\\u200e","\u200f":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","\u202a":"\\u202a","\u202b":"\\u202b","\u202c":"\\u202c","\u202d":"\\u202d","\u202e":"\\u202e","\u202f":"\\u202f","\u2060":"\\u2060","\u2061":"\\u2061","\u2062":"\\u2062","\u2063":"\\u2063","\u2064":"\\u2064","\u2065":"\\u2065","\u2066":"\\u2066","\u2067":"\\u2067","\u2068":"\\u2068","\u2069":"\\u2069","\u206a":"\\u206a","\u206b":"\\u206b",
"\u206c":"\\u206c","\u206d":"\\u206d","\u206e":"\\u206e","\u206f":"\\u206f","\ufeff":"\\ufeff","\ufff0":"\\ufff0","\ufff1":"\\ufff1","\ufff2":"\\ufff2","\ufff3":"\\ufff3","\ufff4":"\\ufff4","\ufff5":"\\ufff5","\ufff6":"\\ufff6","\ufff7":"\\ufff7","\ufff8":"\\ufff8","\ufff9":"\\ufff9","\ufffa":"\\ufffa","\ufffb":"\\ufffb","\ufffc":"\\ufffc","\ufffd":"\\ufffd","\ufffe":"\\ufffe","\uffff":"\\uffff"},v=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,
C,q=JSON&&JSON.stringify||function(a){n.lastIndex=0;n.test(a)&&(a=a.replace(n,function(a){return f[a]}));return'"'+a+'"'},r=function(a){var d,c={},e=[];for(d=0;65536>d;d++)e.push(String.fromCharCode(d));a.lastIndex=0;e.join("").replace(a,function(a){c[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);return""});a.lastIndex=0;return c};c.quote=function(a){a=q(a);v.lastIndex=0;if(!v.test(a))return a;C||(C=r(v));return a.replace(v,function(a){return C[a]})};var F="websocket xdr-streaming xhr-streaming iframe-eventsource iframe-htmlfile xdr-polling xhr-polling iframe-xhr-polling jsonp-polling".split(" ");
c.probeProtocols=function(){for(var a={},d=0;d<F.length;d++){var c=F[d];a[c]=k[c]&&k[c].enabled()}return a};c.detectProtocols=function(a,d,c){var e={},b=[];d||(d=F);for(var g=0;g<d.length;g++){var f=d[g];e[f]=a[f]}var k=function(a){var d=a.shift();e[d]?b.push(d):0<a.length&&k(a)};!1!==c.websocket&&k(["websocket"]);e["xhr-streaming"]&&!c.null_origin?b.push("xhr-streaming"):!e["xdr-streaming"]||c.cookie_needed||c.null_origin?k(["iframe-eventsource","iframe-htmlfile"]):b.push("xdr-streaming");e["xhr-polling"]&&
!c.null_origin?b.push("xhr-polling"):!e["xdr-polling"]||c.cookie_needed||c.null_origin?k(["iframe-xhr-polling","jsonp-polling"]):b.push("xdr-polling");return b};c.createHook=function(){var a="a"+c.random_string(8);if(!("_sockjs_global"in l)){var d={};l._sockjs_global=function(a){a in d||(d[a]={id:a,del:function(){delete d[a]}});return d[a]}}return l._sockjs_global(a)};c.attachMessage=function(a){c.attachEvent("message",a)};c.attachEvent=function(a,d){"undefined"!==typeof l.addEventListener?l.addEventListener(a,
d,!1):(m.attachEvent("on"+a,d),l.attachEvent("on"+a,d))};c.detachMessage=function(a){c.detachEvent("message",a)};c.detachEvent=function(a,d){"undefined"!==typeof l.addEventListener?l.removeEventListener(a,d,!1):(m.detachEvent("on"+a,d),l.detachEvent("on"+a,d))};var s={},u=!1,z=function(){for(var a in s)s[a](),delete s[a]};c.attachEvent("unload",function(){u||(u=!0,z())});c.unload_add=function(a){var d=c.random_string(8);s[d]=a;u&&c.delay(z);return d};c.unload_del=function(a){a in s&&delete s[a]};
c.createIframe=function(a,d){var b=m.createElement("iframe"),e,g,k=function(){clearTimeout(e);try{b.onload=null}catch(a){}b.onerror=null},f=function(){b&&(k(),setTimeout(function(){b&&b.parentNode.removeChild(b);b=null},0),c.unload_del(g))},n=function(a){b&&(f(),d(a))};b.src=a;b.style.display="none";b.style.position="absolute";b.onerror=function(){n("onerror")};b.onload=function(){clearTimeout(e);e=setTimeout(function(){n("onload timeout")},2E3)};m.body.appendChild(b);e=setTimeout(function(){n("timeout")},
15E3);g=c.unload_add(f);return{post:function(a,d){try{b&&b.contentWindow&&b.contentWindow.postMessage(a,d)}catch(c){}},cleanup:f,loaded:k}};c.createHtmlfile=function(a,d){var b=new ActiveXObject("htmlfile"),e,g,k,f=function(){clearTimeout(e)},n=function(){b&&(f(),c.unload_del(g),k.parentNode.removeChild(k),k=b=null,CollectGarbage())};b.open();b.write('<html><script>document.domain="'+document.domain+'";\x3c/script></html>');b.close();b.parentWindow._jp=l._jp;var h=b.createElement("div");b.body.appendChild(h);
k=b.createElement("iframe");h.appendChild(k);k.src=a;e=setTimeout(function(){b&&(n(),d("timeout"))},15E3);g=c.unload_add(n);return{post:function(a,d){try{k&&k.contentWindow&&k.contentWindow.postMessage(a,d)}catch(c){}},cleanup:n,loaded:f}};var p=function(){};p.prototype=new g(["chunk","finish"]);p.prototype._start=function(a,d,b,e){var g=this;try{g.xhr=new XMLHttpRequest}catch(k){}if(!g.xhr)try{g.xhr=new l.ActiveXObject("Microsoft.XMLHTTP")}catch(f){}if(l.ActiveXObject||l.XDomainRequest)d+=(-1===
d.indexOf("?")?"?":"&")+"t="+ +new Date;g.unload_ref=c.unload_add(function(){g._cleanup(!0)});try{g.xhr.open(a,d,!0)}catch(n){g.emit("finish",0,"");g._cleanup();return}e&&e.no_credentials||(g.xhr.withCredentials="true");if(e&&e.headers)for(var h in e.headers)g.xhr.setRequestHeader(h,e.headers[h]);g.xhr.onreadystatechange=function(){if(g.xhr){var a=g.xhr;switch(a.readyState){case 3:try{var d=a.status,c=a.responseText}catch(b){}1223===d&&(d=204);c&&0<c.length&&g.emit("chunk",d,c);break;case 4:d=a.status,
1223===d&&(d=204),g.emit("finish",d,a.responseText),g._cleanup(!1)}}};g.xhr.send(b)};p.prototype._cleanup=function(a){if(this.xhr){c.unload_del(this.unload_ref);this.xhr.onreadystatechange=function(){};if(a)try{this.xhr.abort()}catch(d){}this.unload_ref=this.xhr=null}};p.prototype.close=function(){this.nuke();this._cleanup(!0)};(c.XHRCorsObject=function(){var a=this,d=arguments;c.delay(function(){a._start.apply(a,d)})}).prototype=new p;(c.XHRLocalObject=function(a,d,b){var e=this;c.delay(function(){e._start(a,
d,b,{no_credentials:!0})})}).prototype=new p;p=c.XDRObject=function(a,d,b){var e=this;c.delay(function(){e._start(a,d,b)})};p.prototype=new g(["chunk","finish"]);p.prototype._start=function(a,d,b){var e=this,g=new XDomainRequest;d+=(-1===d.indexOf("?")?"?":"&")+"t="+ +new Date;var k=g.ontimeout=g.onerror=function(){e.emit("finish",0,"");e._cleanup(!1)};g.onprogress=function(){e.emit("chunk",200,g.responseText)};g.onload=function(){e.emit("finish",200,g.responseText);e._cleanup(!1)};e.xdr=g;e.unload_ref=
c.unload_add(function(){e._cleanup(!0)});try{e.xdr.open(a,d),e.xdr.send(b)}catch(f){k()}};p.prototype._cleanup=function(a){if(this.xdr){c.unload_del(this.unload_ref);this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null;if(a)try{this.xdr.abort()}catch(d){}this.unload_ref=this.xdr=null}};p.prototype.close=function(){this.nuke();this._cleanup(!0)};c.isXHRCorsCapable=function(){return l.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:l.XDomainRequest&&m.domain?2:t.enabled()?
3:4};var k=function(a,d,b){if(this===l)return new k(a,d,b);var e=this,g;e._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0};b&&c.objectExtend(e._options,b);e._base_url=c.amendUrl(a);e._server=e._options.server||c.random_number_string(1E3);e._options.protocols_whitelist&&e._options.protocols_whitelist.length?g=e._options.protocols_whitelist:(g="string"===typeof d&&0<d.length?[d]:c.isArray(d)?d:null)&&e._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.');
e._protocols=[];e.protocol=null;e.readyState=k.CONNECTING;e._ir=O(e._base_url);e._ir.onfinish=function(a,d){e._ir=null;a?(e._options.info&&(a=c.objectExtend(a,e._options.info)),e._options.rtt&&(d=e._options.rtt),e._applyInfo(a,d,g),e._didClose()):e._didClose(1002,"Can't connect to server",!0)}};k.prototype=new h;k.version="0.3.4";k.CONNECTING=0;k.OPEN=1;k.CLOSING=2;k.CLOSED=3;k.prototype._debug=function(){this._options.debug&&c.log.apply(c,arguments)};k.prototype._dispatchOpen=function(){this.readyState===
k.CONNECTING?(this._transport_tref&&(clearTimeout(this._transport_tref),this._transport_tref=null),this.readyState=k.OPEN,this.dispatchEvent(new b("open"))):this._didClose(1006,"Server lost session")};k.prototype._dispatchMessage=function(a){this.readyState===k.OPEN&&this.dispatchEvent(new b("message",{data:a}))};k.prototype._dispatchHeartbeat=function(a){this.readyState===k.OPEN&&this.dispatchEvent(new b("heartbeat",{}))};k.prototype._didClose=function(a,d,g){var e=this;if(e.readyState!==k.CONNECTING&&
e.readyState!==k.OPEN&&e.readyState!==k.CLOSING)throw Error("INVALID_STATE_ERR");e._ir&&(e._ir.nuke(),e._ir=null);e._transport&&(e._transport.doCleanup(),e._transport=null);var f=new b("close",{code:a,reason:d,wasClean:c.userSetCode(a)});if(!c.userSetCode(a)&&e.readyState===k.CONNECTING&&!g){if(e._try_next_protocol(f))return;f=new b("close",{code:2E3,reason:"All transports failed",wasClean:!1,last_event:f})}e.readyState=k.CLOSED;c.delay(function(){e.dispatchEvent(f)})};k.prototype._didMessage=function(a){switch(a.slice(0,
1)){case "o":this._dispatchOpen();break;case "a":a=JSON.parse(a.slice(1)||"[]");for(var d=0;d<a.length;d++)this._dispatchMessage(a[d]);break;case "m":a=JSON.parse(a.slice(1)||"null");this._dispatchMessage(a);break;case "c":a=JSON.parse(a.slice(1)||"[]");this._didClose(a[0],a[1]);break;case "h":this._dispatchHeartbeat()}};k.prototype._try_next_protocol=function(a){var d=this;d.protocol&&(d._debug("Closed transport:",d.protocol,""+a),d.protocol=null);d._transport_tref&&(clearTimeout(d._transport_tref),
d._transport_tref=null);for(;;){a=d.protocol=d._protocols.shift();if(!a)return!1;if(k[a]&&!0===k[a].need_body&&(!m.body||"undefined"!==typeof m.readyState&&"complete"!==m.readyState))return d._protocols.unshift(a),d.protocol="waiting-for-load",c.attachEvent("load",function(){d._try_next_protocol()}),!0;if(k[a]&&k[a].enabled(d._options)){d._transport_tref=c.delay((d._options.rto||0)*(k[a].roundTrips||1)||5E3,function(){d.readyState===k.CONNECTING&&d._didClose(2007,"Transport timeouted")});var b=c.random_string(8),
b=d._base_url+"/"+d._server+"/"+b;d._debug("Opening transport:",a," url:"+b," RTO:"+d._options.rto);d._transport=new k[a](d,b,d._base_url);return!0}d._debug("Skipping transport:",a)}};k.prototype.close=function(a,d){if(a&&!c.userSetCode(a))throw Error("INVALID_ACCESS_ERR");if(this.readyState!==k.CONNECTING&&this.readyState!==k.OPEN)return!1;this.readyState=k.CLOSING;this._didClose(a||1E3,d||"Normal closure");return!0};k.prototype.send=function(a){if(this.readyState===k.CONNECTING)throw Error("INVALID_STATE_ERR");
this.readyState===k.OPEN&&this._transport.doSend(c.quote(""+a));return!0};k.prototype._applyInfo=function(a,d,b){this._options.info=a;this._options.rtt=d;this._options.rto=c.countRTO(d);this._options.info.null_origin=!m.domain;d=c.probeProtocols();this._protocols=c.detectProtocols(d,b,a)};p=k.websocket=function(a,d){var b=this,e=d+"/websocket",e="https"===e.slice(0,5)?"wss"+e.slice(5):"ws"+e.slice(4);b.ri=a;b.url=e;b.ws=new (l.WebSocket||l.MozWebSocket)(b.url);b.ws.onmessage=function(a){b.ri._didMessage(a.data)};
b.unload_ref=c.unload_add(function(){b.ws.close()});b.ws.onclose=function(){b.ri._didMessage(c.closeFrame(1006,"WebSocket connection broken"))}};p.prototype.doSend=function(a){this.ws.send("["+a+"]")};p.prototype.doCleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=null,a.close(),c.unload_del(this.unload_ref),this.unload_ref=this.ri=this.ws=null)};p.enabled=function(){return!(!l.WebSocket&&!l.MozWebSocket)};p.roundTrips=2;var w=function(){};w.prototype.send_constructor=function(a){this.send_buffer=
[];this.sender=a};w.prototype.doSend=function(a){this.send_buffer.push(a);this.send_stop||this.send_schedule()};w.prototype.send_schedule_wait=function(){var a=this,d;a.send_stop=function(){a.send_stop=null;clearTimeout(d)};d=c.delay(25,function(){a.send_stop=null;a.send_schedule()})};w.prototype.send_schedule=function(){var a=this;if(0<a.send_buffer.length){var d="["+a.send_buffer.join(",")+"]";a.send_stop=a.sender(a.trans_url,d,function(d,c){a.send_stop=null;!1===d?a.ri._didClose(1006,"Sending error "+
c):a.send_schedule_wait()});a.send_buffer=[]}};w.prototype.send_destructor=function(){this._send_stop&&this._send_stop();this._send_stop=null};var P=function(a,d,b){if(!("_send_form"in this)){var e=this._send_form=m.createElement("form"),g=this._send_area=m.createElement("textarea");g.name="d";e.style.display="none";e.style.position="absolute";e.method="POST";e.enctype="application/x-www-form-urlencoded";e.acceptCharset="UTF-8";e.appendChild(g);m.body.appendChild(e)}var e=this._send_form,g=this._send_area,
k="a"+c.random_string(8);e.target=k;e.action=a+"/jsonp_send?i="+k;var f;try{f=m.createElement('<iframe name="'+k+'">')}catch(n){f=m.createElement("iframe"),f.name=k}f.id=k;e.appendChild(f);f.style.display="none";try{g.value=d}catch(h){c.log("Your browser is seriously broken. Go home! "+h.message)}e.submit();var l=function(a){f.onerror&&(f.onreadystatechange=f.onerror=f.onload=null,c.delay(500,function(){f.parentNode.removeChild(f);f=null}),g.value="",b(!0))};f.onerror=f.onload=l;f.onreadystatechange=
function(a){"complete"==f.readyState&&l()};return l},Q=function(a){return function(d,c,b){(new a("POST",d+"/xhr_send",c)).onfinish=function(a,d){b(200===a||204===a,"http status "+a)};return function(a){b(!1,a)}}},R=function(a,d){var b,e=m.createElement("script"),g,f=function(a){g&&(g.parentNode.removeChild(g),g=null);e&&(clearTimeout(b),e.parentNode.removeChild(e),e=e.onreadystatechange=e.onerror=e.onload=e.onclick=null,d(a),d=null)},k=!1,n=null;e.id="a"+c.random_string(8);e.src=a;e.type="text/javascript";
e.charset="UTF-8";e.onerror=function(a){n||(n=setTimeout(function(){k||f(c.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1E3))};e.onload=function(a){f(c.closeFrame(1006,"JSONP script loaded abnormally (onload)"))};e.onreadystatechange=function(a){if(/loaded|closed/.test(e.readyState)){if(e&&e.htmlFor&&e.onclick){k=!0;try{e.onclick()}catch(d){}}e&&f(c.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}};if("undefined"===typeof e.async&&m.attachEvent)if(/opera/i.test(navigator.userAgent))g=
m.createElement("script"),g.text="try{var a = document.getElementById('"+e.id+"'); if(a)a.onerror();}catch(x){};",e.async=g.async=!1;else{try{e.htmlFor=e.id,e.event="onclick"}catch(h){}e.async=!0}"undefined"!==typeof e.async&&(e.async=!0);b=setTimeout(function(){f(c.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35E3);var l=m.getElementsByTagName("head")[0];l.insertBefore(e,l.firstChild);g&&l.insertBefore(g,l.firstChild);return f},p=k["jsonp-polling"]=function(a,d){c.polluteGlobalNamespace();
this.ri=a;this.trans_url=d;this.send_constructor(P);this._schedule_recv()};p.prototype=new w;p.prototype._schedule_recv=function(){var a=this;a._recv_stop=S(a.trans_url+"/jsonp",R,function(d){a._recv_stop=null;d&&(a._is_closing||a.ri._didMessage(d));a._is_closing||a._schedule_recv()})};p.enabled=function(){return!0};p.need_body=!0;p.prototype.doCleanup=function(){this._is_closing=!0;this._recv_stop&&this._recv_stop();this.ri=this._recv_stop=null;this.send_destructor()};var S=function(a,d,b){var e=
"a"+c.random_string(6);a=a+"?c="+escape("_jp."+e);var g=0;d=d(a,function(a){switch(g){case 0:delete l._jp[e];b(a);break;case 1:b(a);g=2;break;case 2:delete l._jp[e]}});l._jp[e]=d;return function(){l._jp[e]&&(g=1,l._jp[e](c.closeFrame(1E3,"JSONP user aborted read")))}},p=function(){};p.prototype=new w;p.prototype.run=function(a,d,b,c,g){this.ri=a;this.trans_url=d;this.send_constructor(Q(g));this.poll=new G(a,c,d+b,g)};p.prototype.doCleanup=function(){this.poll&&(this.poll.abort(),this.poll=null)};
var y=k["xhr-streaming"]=function(a,d){this.run(a,d,"/xhr_streaming",B,c.XHRCorsObject)};y.prototype=new p;y.enabled=function(){return l.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)};y.roundTrips=2;y.need_body=!0;w=k["xdr-streaming"]=function(a,d){this.run(a,d,"/xhr_streaming",B,c.XDRObject)};w.prototype=new p;w.enabled=function(){return!!l.XDomainRequest};w.roundTrips=2;var H=k["xhr-polling"]=function(a,d){this.run(a,d,"/xhr",B,c.XHRCorsObject)};H.prototype=
new p;H.enabled=y.enabled;H.roundTrips=2;y=k["xdr-polling"]=function(a,d){this.run(a,d,"/xhr",B,c.XDRObject)};y.prototype=new p;y.enabled=w.enabled;y.roundTrips=2;var t=function(){};t.prototype.i_constructor=function(a,d,b){var e=this;e.ri=a;e.origin=c.getOrigin(b);e.base_url=b;e.trans_url=d;a=b+"/iframe.html";e.ri._options.devel&&(a+="?t="+ +new Date);e.window_id=c.random_string(8);a+="#"+e.window_id;e.iframeObj=c.createIframe(a,function(a){e.ri._didClose(1006,"Unable to load an iframe ("+a+")")});
e.onmessage_cb=c.bind(e.onmessage,e);c.attachMessage(e.onmessage_cb)};t.prototype.doCleanup=function(){if(this.iframeObj){c.detachMessage(this.onmessage_cb);try{this.iframeObj.iframe.contentWindow&&this.postMessage("c")}catch(a){}this.iframeObj.cleanup();this.onmessage_cb=this.iframeObj=this.iframeObj=null}};t.prototype.onmessage=function(a){if(a.origin===this.origin){var d=a.data.slice(0,8),b=a.data.slice(8,9);a=a.data.slice(9);if(d===this.window_id)switch(b){case "s":this.iframeObj.loaded();this.postMessage("s",
JSON.stringify([k.version,this.protocol,this.trans_url,this.base_url]));break;case "t":this.ri._didMessage(a)}}};t.prototype.postMessage=function(a,d){this.iframeObj.post(this.window_id+a+(d||""),this.origin)};t.prototype.doSend=function(a){this.postMessage("m",a)};t.enabled=function(){var a=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"===typeof l.postMessage||"object"===typeof l.postMessage)&&!a};var I,J=function(a,d){parent!==l?parent.postMessage(I+
a+(d||""),"*"):c.log("Can't postMessage, no parent window.",a,d)},x=function(){};x.prototype._didClose=function(a,d){J("t",c.closeFrame(a,d))};x.prototype._didMessage=function(a){J("t",a)};x.prototype._doSend=function(a){this._transport.doSend(a)};x.prototype._doCleanup=function(){this._transport.doCleanup()};c.parent_origin=void 0;k.bootstrap_iframe=function(){var a;I=m.location.hash.slice(1);c.attachMessage(function(d){if(d.source===parent&&("undefined"===typeof c.parent_origin&&(c.parent_origin=
d.origin),d.origin===c.parent_origin)){var b=d.data.slice(0,8),e=d.data.slice(8,9);d=d.data.slice(9);if(b===I)switch(e){case "s":var g=JSON.parse(d),b=g[0],e=g[1];d=g[2];g=g[3];b!==k.version&&c.log('Incompatibile SockJS! Main site uses: "'+b+'", the iframe: "'+k.version+'".');if(!c.flatUrl(d)||!c.flatUrl(g)){c.log("Only basic urls are supported in SockJS");break}if(!c.isSameOriginUrl(d)||!c.isSameOriginUrl(g)){c.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([l.location.href,
d,g])+")");break}a=new x;a._transport=new x[e](a,d,g);break;case "m":a._doSend(d);break;case "c":a&&a._doCleanup(),a=null}}});J("s")};var D=function(a,d){var b=this;c.delay(function(){b.doXhr(a,d)})};D.prototype=new g(["finish"]);D.prototype.doXhr=function(a,d){var b=this,g=(new Date).getTime(),f=new d("GET",a+"/info"),k=c.delay(8E3,function(){f.ontimeout()});f.onfinish=function(a,d){clearTimeout(k);k=null;if(200===a){var c=(new Date).getTime()-g,f=JSON.parse(d);"object"!==typeof f&&(f={});b.emit("finish",
f,c)}else b.emit("finish")};f.ontimeout=function(){f.close();b.emit("finish")}};var M=function(a){var d=this,b=function(){var b=new t;b.protocol="w-iframe-info-receiver";var c=function(a){"string"===typeof a&&"m"===a.substr(0,1)?(a=JSON.parse(a.substr(1)),d.emit("finish",a[0],a[1])):d.emit("finish");b.doCleanup();b=null};b.i_constructor({_options:{},_didClose:c,_didMessage:c},a,a)};m.body?b():c.attachEvent("load",b)};M.prototype=new g(["finish"]);var N=function(){var a=this;c.delay(function(){a.emit("finish",
{},2E3)})};N.prototype=new g(["finish"]);var O=function(a){if(c.isSameOriginUrl(a))return new D(a,c.XHRLocalObject);switch(c.isXHRCorsCapable()){case 1:return new D(a,c.XHRLocalObject);case 2:return new D(a,c.XDRObject);case 3:return new M(a);default:return new N}};(x["w-iframe-info-receiver"]=function(a,b,g){(new D(g,c.XHRLocalObject)).onfinish=function(b,d){a._didMessage("m"+JSON.stringify([b,d]));a._didClose()}}).prototype.doCleanup=function(){};g=k["iframe-eventsource"]=function(){this.protocol=
"w-iframe-eventsource";this.i_constructor.apply(this,arguments)};g.prototype=new t;g.enabled=function(){return"EventSource"in l&&t.enabled()};g.need_body=!0;g.roundTrips=3;(x["w-iframe-eventsource"]=function(a,b){this.run(a,b,"/eventsource",K,c.XHRLocalObject)}).prototype=new p;g=k["iframe-xhr-polling"]=function(){this.protocol="w-iframe-xhr-polling";this.i_constructor.apply(this,arguments)};g.prototype=new t;g.enabled=function(){return l.XMLHttpRequest&&t.enabled()};g.need_body=!0;g.roundTrips=3;
(x["w-iframe-xhr-polling"]=function(a,b){this.run(a,b,"/xhr",B,c.XHRLocalObject)}).prototype=new p;g=k["iframe-htmlfile"]=function(){this.protocol="w-iframe-htmlfile";this.i_constructor.apply(this,arguments)};g.prototype=new t;g.enabled=function(){return t.enabled()};g.need_body=!0;g.roundTrips=3;(x["w-iframe-htmlfile"]=function(a,b){this.run(a,b,"/htmlfile",L,c.XHRLocalObject)}).prototype=new p;var G=function(a,b,c,g){this.ri=a;this.Receiver=b;this.recv_url=c;this.AjaxObject=g;this._scheduleRecv()};
G.prototype._scheduleRecv=function(){var a=this,b=a.poll=new a.Receiver(a.recv_url,a.AjaxObject);b.onmessage=function(b){a.ri._didMessage(b.data)};b.onclose=function(c){a.poll=b=b.onmessage=b.onclose=null;a.poll_is_closing||("permanent"===c.reason?a.ri._didClose(1006,"Polling error ("+c.reason+")"):a._scheduleRecv())}};G.prototype.abort=function(){this.poll_is_closing=!0;this.poll&&this.poll.abort()};var K=function(a){var d=this,g=new EventSource(a);g.onmessage=function(a){d.dispatchEvent(new b("message",
{data:unescape(a.data)}))};d.es_close=g.onerror=function(a,f){var k=f?"user":2!==g.readyState?"network":"permanent";d.es_close=g.onmessage=g.onerror=null;g.close();g=null;c.delay(200,function(){d.dispatchEvent(new b("close",{reason:k}))})}};K.prototype=new h;K.prototype.abort=function(){this.es_close&&this.es_close({},!0)};var E,L=function(a){var d=this;c.polluteGlobalNamespace();d.id="a"+c.random_string(6,26);a+=(-1===a.indexOf("?")?"?":"&")+"c="+escape("_jp."+d.id);if(void 0===E)if("ActiveXObject"in
l)try{E=!!new ActiveXObject("htmlfile")}catch(g){}else E=!1;var e=E?c.createHtmlfile:c.createIframe,f;l._jp[d.id]={start:function(){f.loaded()},message:function(a){d.dispatchEvent(new b("message",{data:a}))},stop:function(){d.iframe_close({},"network")}};d.iframe_close=function(a,c){f.cleanup();d.iframe_close=f=null;delete l._jp[d.id];d.dispatchEvent(new b("close",{reason:c}))};f=e(a,function(a){d.iframe_close({},"permanent")})};L.prototype=new h;L.prototype.abort=function(){this.iframe_close&&this.iframe_close({},
"user")};var B=function(a,d){var c=this,g=0;c.xo=new d("POST",a,null);c.xo.onchunk=function(a,d){if(200===a)for(;;){var f=d.slice(g),k=f.indexOf("\n");if(-1===k)break;g+=k+1;f=f.slice(0,k);c.dispatchEvent(new b("message",{data:f}))}};c.xo.onfinish=function(a,d){c.xo.onchunk(a,d);c.xo=null;c.dispatchEvent(new b("close",{reason:200===a?"network":"permanent"}))}};B.prototype=new h;B.prototype.abort=function(){this.xo&&(this.xo.close(),this.dispatchEvent(new b("close",{reason:"user"})),this.xo=null)};
k.getUtils=function(){return c};k.getIframeTransport=function(){return t};return k}();"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1);"function"===typeof define&&define.amd&&define("sockjs",[],function(){return SockJS});(function(){var m,l,c,h={}.hasOwnProperty;l=function(){function b(b,c,f){this.command=b;this.headers=null!=c?c:{};this.body=null!=f?f:""}b.prototype.toString=function(){var b,c,f,l;b=[this.command];l=this.headers;for(c in l)h.call(l,c)&&(f=l[c],b.push(""+c+":"+f));this.body&&b.push("content-length:"+(""+this.body).length);b.push("\n"+this.body);return b.join("\n")};b._unmarshallSingle=function(c){var n,f,h,l,q,r,m,s,u;l=c.search(/\n\n/);n=c.substring(0,l).split("\n");h=n.shift();q={};m=function(b){return b.replace(/^\s+|\s+$/g,
"")};r=f=null;f=s=0;for(u=n.length;0<=u?s<u:s>u;f=0<=u?++s:--s)r=n[f],f=r.indexOf(":"),q[m(r.substring(0,f))]=m(r.substring(f+1));n="";l+=2;if(q["content-length"])f=parseInt(q["content-length"]),n=(""+c).substring(l,l+f);else for(f=null,f=m=l,s=c.length;l<=s?m<s:m>s;f=l<=s?++m:--m){f=c.charAt(f);if("\x00"===f)break;n+=f}return new b(h,q,n)};b.unmarshall=function(c){var l,f,h,m;h=c.split(/\x00\n*/);m=[];l=0;for(f=h.length;l<f;l++)c=h[l],0<(null!=c?c.length:void 0)&&m.push(b._unmarshallSingle(c));return m};
b.marshall=function(c,l,f){return(new b(c,l,f)).toString()+"\x00"};return b}();m=function(){function b(b){this.ws=b;this.ws.binaryType="arraybuffer";this.counter=0;this.connected=!1;this.heartbeat={outgoing:1E4,incoming:1E4};this.subscriptions={}}b.prototype._transmit=function(b,c,f){b=l.marshall(b,c,f);"function"===typeof this.debug&&this.debug(">>> "+b);return this.ws.send(b)};b.prototype._setupHeartbeat=function(b){var l,f,h,m,q=this;if((f=b.version)===c.VERSIONS.V1_1||f===c.VERSIONS.V1_2)if(l=
function(){var c,f,l,h;l=b["heart-beat"].split(",");h=[];c=0;for(f=l.length;c<f;c++)m=l[c],h.push(parseInt(m));return h}(),f=l[0],l=l[1],0!==this.heartbeat.outgoing&&0!==l&&(h=Math.max(this.heartbeat.outgoing,l),"function"===typeof this.debug&&this.debug("send PING every "+h+"ms"),this.pinger="undefined"!==typeof window&&null!==window?window.setInterval(function(){q.ws.send("\n");return"function"===typeof q.debug?q.debug(">>> PING"):void 0},h):void 0),0!==this.heartbeat.incoming&&0!==f)return h=Math.max(this.heartbeat.incoming,
f),"function"===typeof this.debug&&this.debug("check PONG every "+h+"ms"),this.ponger="undefined"!==typeof window&&null!==window?window.setInterval(function(){var b;b=Date.now()-q.serverActivity;if(b>2*h)return"function"===typeof q.debug&&q.debug("did not receive server activity for the last "+b+"ms"),q.ws.close()},h):void 0};b.prototype.connect=function(b,h,f,m,C){var q=this;this.connectCallback=f;"function"===typeof this.debug&&this.debug("Opening Web Socket...");this.ws.onmessage=function(b){var c,
g,f,h,n;if("undefined"!==typeof ArrayBuffer&&b.data instanceof ArrayBuffer){b=new Uint8Array(b.data);"function"===typeof q.debug?q.debug("--- got data length: "+b.length):void 0;h=[];g=0;for(f=b.length;g<f;g++)c=b[g],h.push(String.fromCharCode(c));b=h.join("")}else b=b.data;q.serverActivity=Date.now();if("\n"===b)"function"===typeof q.debug&&q.debug("<<< PONG");else{"function"===typeof q.debug&&q.debug("<<< "+b);h=l.unmarshall(b);n=[];g=0;for(f=h.length;g<f;g++)switch(b=h[g],b.command){case "CONNECTED":"function"===
typeof q.debug&&q.debug("connected to server "+b.headers.server);q.connected=!0;q._setupHeartbeat(b.headers);n.push("function"===typeof q.connectCallback?q.connectCallback(b):void 0);break;case "MESSAGE":c=q.subscriptions[b.headers.subscription];n.push("function"===typeof c?c(b):void 0);break;case "RECEIPT":n.push("function"===typeof q.onreceipt?q.onreceipt(b):void 0);break;case "ERROR":n.push("function"===typeof m?m(b):void 0);break;default:n.push("function"===typeof q.debug?q.debug("Unhandled frame: "+
b):void 0)}return n}};this.ws.onclose=function(){var b;b="Whoops! Lost connection to "+q.ws.url;"function"===typeof q.debug&&q.debug(b);q._cleanUp();return"function"===typeof m?m(b):void 0};return this.ws.onopen=function(){var f;"function"===typeof q.debug&&q.debug("Web Socket Opened...");f={"accept-version":c.VERSIONS.supportedVersions(),"heart-beat":[q.heartbeat.outgoing,q.heartbeat.incoming].join()};C&&(f.host=C);b&&(f.login=b);h&&(f.passcode=h);return q._transmit("CONNECT",f)}};b.prototype.disconnect=
function(b){this._transmit("DISCONNECT");this.ws.onclose=null;this.ws.close();this._cleanUp();return"function"===typeof b?b():void 0};b.prototype._cleanUp=function(){this.connected=!1;this.pinger&&"undefined"!==typeof window&&null!==window&&window.clearInterval(this.pinger);if(this.ponger)return"undefined"!==typeof window&&null!==window?window.clearInterval(this.ponger):void 0};b.prototype.send=function(b,c,f){null==c&&(c={});null==f&&(f="");c.destination=b;return this._transmit("SEND",c,f)};b.prototype.subscribe=
function(b,c,f){null==f&&(f={});f.id||(f.id="sub-"+this.counter++);f.destination=b;this.subscriptions[f.id]=c;this._transmit("SUBSCRIBE",f);return f.id};b.prototype.unsubscribe=function(b){delete this.subscriptions[b];return this._transmit("UNSUBSCRIBE",{id:b})};b.prototype.begin=function(b){return this._transmit("BEGIN",{transaction:b})};b.prototype.commit=function(b){return this._transmit("COMMIT",{transaction:b})};b.prototype.abort=function(b){return this._transmit("ABORT",{transaction:b})};b.prototype.ack=
function(b,c,f){null==f&&(f={});f["message-id"]=b;f.subscription=c;return this._transmit("ACK",f)};b.prototype.nack=function(b,c,f){null==f&&(f={});f["message-id"]=b;f.subscription=c;return this._transmit("NACK",f)};return b}();c={libVersion:"2.0.0-next",VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(b,g){var h;null==g&&(g=["v10.stomp","v11.stomp"]);h=new (c.WebSocketClass||WebSocket)(b,g);return new m(h)},over:function(b){return new m(b)},
Frame:l};"undefined"!==typeof window&&null!==window?window.Stomp=c:"undefined"!==typeof exports&&null!==exports?(exports.Stomp=c,c.WebSocketClass=require("./test/server.mock.js").StompServerMock):self.Stomp=c}).call(this);Vonix=function(m,l){var c=null,h={};connect=function(){c=Stomp.over(new SockJS("http://"+m+":8010/stomp"));c.heartbeat.outgoing=25E3;c.heartbeat.incoming=0;c.connect("guest","guest",on_connect,on_connect_error,"/")};on_connect=function(){c.subscribe("/topic/agent-"+l,on_message);"function"===typeof h.onConnect?h.onConnect(new Date):void 0};on_connect_error=function(b){"function"===typeof h.onError?h.onError(new Date,"broker","Connection to "+m+" has been lost"):void 0;c.connected||setTimeout(connect(),
500)};on_message=function(b){b=parse_event(b.body);switch(b.event_name){case "dial":"function"===typeof h.onDial?h.onDial(b.id,b.date,b.queue,b.from,b.to,b.callfilename,b.contact_name,b.action_id):void 0;break;case "dialconnect":"function"===typeof h.onDialAnswer?h.onDialAnswer(b.id,b.date):void 0;break;case "dialfailure":"function"===typeof h.onDialFailure?h.onDialFailure(b.id,b.date,b.cause,b.cause_txt):void 0;break;case "called":"function"===typeof h.onReceive?h.onReceive(b.id,b.date,b.queue,b.from,
b.to,b.callfilename,b.contact_name,b.action_id):void 0;break;case "calledsuccess":"function"===typeof h.onReceiveAnswer?h.onReceiveAnswer(b.id,b.date,b.waiting_seconds):void 0;break;case "calledfailure":"function"===typeof h.onReceiveFailure?h.onReceiveFailure(b.id,b.date,b.ringing_seconds):void 0;break;case "hangup":"function"===typeof h.onHangUp?h.onHangUp(b.id,b.date,b.cause,b.cause_txt):void 0;break;case "login":"function"===typeof h.onLogin?h.onLogin(b.date,b.location):void 0;break;case "logoff":"function"===
typeof h.onLogoff?h.onLogoff(b.date,b.location,b.duration):void 0;break;case "pause":"function"===typeof h.onPause?h.onPause(b.date,b.reason):void 0;break;case "unpause":"function"===typeof h.onUnpause?h.onUnpause(b.date,b.reason,b.pause_seconds):void 0;break;case "agent_status":"function"===typeof h.onStatus?h.onStatus(b.status,b.location):void 0}};parse_event=function(b){var c={};if("undefined"!=typeof window.DOMParser)var h=(new window.DOMParser).parseFromString(b,"text/xml").documentElement;else"undefined"!=
typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(h=new window.ActiveXObject("Microsoft.XMLDOM"),h.async="false",h=h.loadXML(b).documentElement);c.event_name=h.attributes.name.nodeValue;for(b=0;b<h.childNodes.length;b++)1==h.childNodes[b].nodeType&&h.childNodes[b].firstChild&&(c[h.childNodes[b].tagName]="date"==h.childNodes[b].tagName?parse_date(h.childNodes[b].firstChild.nodeValue):h.childNodes[b].firstChild.nodeValue);return c};parse_date=function(b){b=b.match(/\d+/g);
return new Date(b[2],b[1],b[0],b[3],b[4],b[5],0)};connect();this.onDial=function(b){h.onDial=b};this.onDialAnswer=function(b){h.onDialAnswer=b};this.onDialFailure=function(b){h.onDialFailure=b};this.onReceive=function(b){h.onReceive=b};this.onReceiveAnswer=function(b){h.onReceiveAnswer=b};this.onReceiveFailure=function(b){h.onReceiveFailure=b};this.onHangUp=function(b){h.onHangUp=b};this.onLogin=function(b){h.onLogin=b};this.onLogoff=function(b){h.onLogoff=b};this.onPause=function(b){h.onPause=b};
this.onUnpause=function(b){h.onUnpause=b};this.onStatus=function(b){h.onStatus=b};this.onConnect=function(b){h.onConnect=b};this.onError=function(b){h.onError=b};this.doDial=function(b,g,h,f,m){xml='<action name="dial"><id>'+m+"</id><agent>"+l+"</agent><to>"+b+"</to><name>"+g+"</name><queue>"+h+"</queue><billing_group_id>"+f+"</billing_group_id></action>";c.send("/queue/actions",{},xml)};this.doTransfer=function(b,g){xml='<action name="transfer"><id>js_'+l+"_1</id><agent>"+l+"</agent><call_id>"+b+
"</call_id><to>"+g+"</to></action>";c.send("/queue/actions",{},xml)};this.doHangUp=function(b){xml='<action name="hangup"><id>js_'+l+"_1</id><agent>"+l+"</agent><call_id>"+b+"</call_id></action>";c.send("/queue/actions",{},xml)};this.doPause=function(b){xml='<action name="pause"><id>js_'+l+"_1</id><agent>"+l+"</agent><reason>"+b+"</reason></action>";c.send("/queue/actions",{},xml)};this.doUnpause=function(){xml='<action name="unpause"><id>js_'+l+"_1</id><agent>"+l+"</agent></action>";c.send("/queue/actions",
{},xml)};this.doLogoff=function(){xml='<action name="logoff"><id>js_'+l+"_1</id><agent>"+l+"</agent></action>";c.send("/queue/actions",{},xml)};this.doTag=function(b,g){xml='<action name="tag"><id>js_'+l+"_1</id><call_id>"+b+"</call_id><tag>"+g+"</tag></action>";c.send("/queue/actions",{},xml)};this.doStatus=function(b){xml='<action name="get_agent_status"><id>js_'+l+"_1</id><agent>"+l+"</agent><queue>"+b+"</queue></action>";c.send("/queue/actions",{},xml)}};